<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="RSVP_App.EventListPage"
             Title="Events">
    
    <Grid RowDefinitions="Auto,Auto,*" Padding="16" RowSpacing="12">
        
        <!-- Header Section -->
        <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto" ColumnSpacing="10">
            <Label Text="Event Hub"
                   FontSize="24"
                   FontAttributes="Bold"
                   VerticalOptions="Center" />

            <Button Grid.Column="1"
                    x:Name="AddEventButton"
                    Text="Add Event"
                    Padding="14,8"
                    CornerRadius="10" 
                    Clicked="OnAddEventClicked"
                    VerticalOptions="Center"/>
            
            <Button Grid.Column="2"
                    Text="Profile"
                    Padding="14,8"
                    CornerRadius="10"
                    Clicked="OnProfileClicked"
                    VerticalOptions="Center" />
        </Grid>
        
        <!-- Filter -->
        <Picker Grid.Row="1"
                Title="View"
                ItemsSource="{Binding FilterOptions}"
                SelectedIndex="{Binding SelectedFilterIndex}"
                SelectedIndexChanged="OnFilterChanged" />
        
        <!-- Event List -->
        <CollectionView Grid.Row="2"
                        ItemsSource="{Binding Events}"
                        SelectionMode="Single"
                        SelectionChanged="OnSelectionChanged">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame CornerRadius="10" Padding="10" HasShadow="True" Margin="0,0,0,10">
                        <VerticalStackLayout>
                            <Label Text="{Binding Title}" FontSize="18" FontAttributes="Bold" />
                            <Label Text="{Binding StartUtc, StringFormat='Date: {0:MMMM dd, yyyy}'}" FontSize="14" TextColor="Gray" />
                            <Label Text="{Binding Location}" FontSize="14" TextColor="Gray" />
                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </Grid>
</ContentPage>